name: project-bot

services:
  project-bot:
    build: ..
    container_name: project-bot
    ports:
      - "8003:8002"
    environment:
      # Timezone configuration
      - TZ=Europe/Berlin
      # API Keys - Set these in your .env file
      - OPENAI_API_KEY=${OPENAI_API_KEY}
      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}
      - GOOGLE_API_KEY=${GOOGLE_API_KEY}
      # Optional: Additional API keys if you use multiple Anthropic keys
      - ANTHROPIC_API_KEY2=${ANTHROPIC_API_KEY2:-$ANTHROPIC_API_KEY}
      # Flask settings
      - FLASK_ENV=production
      # Frontend API configuration
      - VITE_API_BASE_URL=http://project-bot:8002
    volumes:
      # Mount organized docker-volumes directory for persistence
      - ../docker-volumes/data:/app/data
      - ../docker-volumes/projects:/app/projects
      - ../docker-volumes/logs:/app/logs
      # Mount config file
      - ../docker-volumes/config.yaml:/app/config.yaml
      # Optional: Mount additional directories if needed
      - ../applications_status.json:/app/applications_status.json
    restart: unless-stopped
    # Multi-architecture support - will use native architecture by default
    # For multi-arch builds, use: docker buildx build --platform linux/amd64,linux/arm64